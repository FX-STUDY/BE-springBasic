![header](https://capsule-render.vercel.app/api?type=soft&color=auto&height=150&section=header&text=UserManagement&fontSize=90&animation=blink&align=center)
<a href="https://hits.seeyoufarm.com"><img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2FFX-STUDY%2FBE-STUDY%2Fhit-counter&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false"/></a>
--
## Tech Stack
![Java](https://img.shields.io/badge/Java-ED8B00?style=for-the-badge&logo=openjdk&logoColor=white)
## DB
![Memory](https://img.shields.io/badge/Memory-000000?style=for-the-badge&logo=memory&logoColor=white)
## ORM
![OMR](https://img.shields.io/badge/NONE-000000?style=for-the-badge&logo=NONE&logoColor=white)
## IDE
![intelliJ](https://img.shields.io/badge/IntelliJIDEA-000000?style=for-the-badge&logo=IntelliJIDEA&logoColor=white)
## TEST
![Junit5](https://img.shields.io/badge/JUnit5-25A162?style=for-the-badge&logo=JUnit5&logoColor=white)
## SCM
![GITHUB](https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white)
--
# ëª©ì 
[ F(X) ë™ì•„ë¦¬ ì‹¤ë ¥ ì¦ì§„ ] <br><br>
ğŸƒğŸ»â€â™‚ï¸ëˆê¸°, ğŸ’¦ì—´ì •, ğŸ§¡ìš•êµ¬, ğŸ‘ŠğŸ»ì¸ì‚¬ì´íŠ¸
## ìš”êµ¬ì‚¬í•­
[ ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ ]<br><br>
1. DiscountPolicy ë³€ê²½ 
ê¸°íšì : <br>
Service Open ì´ ì¼ì£¼ì¼ ë‚¨ì•˜ì§€ë§Œ `ê³ ì • ê¸ˆì•¡ í• ì¸` -> `ì •ë¥  (%) í• ì¸` ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì‹¶ë‹¤.<br>
ê¸°ì¡´ì—” VIP ì—ê²Œ 1000ì›ì„ í• ì¸í•´ ë“œë ¸ì§€ë§Œ, 10% í• ì¸ ì •ì±…ìœ¼ë¡œ ë³€ê²½í•´ ì£¼ì„¸ìš”.<br>

ê°œë°œì : <br>
ì¼ì£¼ì¼ ë‚¨ì•˜ëŠ”ë°.... <br>

ê¸°íšì : <br>
Agile ì„ ì–¸ ëª¨ë¥´ë‚˜ìš”? " ê³„íšì„ ë”°ë¥´ê¸°ë³´ë‹¤ëŠ” ë³€í™”ì— ëŒ€ì‘í•˜ë¼ " <br>
https://agilemanifesto.org/iso/ko/manifesto.html <br>

ê°œë°œì :<br>
...<br>

2. ê´€ì‹¬ì‚¬ ë¶„ë¦¬
   - êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ëŠ” ì±…ì„ì„ ë³„ë„ì˜ Class ë¡œ êµ¬ì„±í•˜ì‹œì˜¤.

3. ì¢‹ì€ OOP ì„¤ê³„ 5ê°€ì§€ ì›ì¹™ì— ëŒ€í•´ ê³µë¶€ README ì— ì‘ì„±ë°”ëë‹ˆë‹¤.

# 2. ê°ì²´ì§€í–¥ ì›ë¦¬ ì ìš©

## ìš”êµ¬ì‚¬í•­

[ ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ ]

1. DiscountPolicy ë³€ê²½ ê¸°íšì :Service Open ì´ ì¼ì£¼ì¼ ë‚¨ì•˜ì§€ë§ŒÂ `ê³ ì • ê¸ˆì•¡ í• ì¸`Â ->Â `ì •ë¥  (%) í• ì¸`Â ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì‹¶ë‹¤.ê¸°ì¡´ì—” VIP ì—ê²Œ 1000ì›ì„ í• ì¸í•´ ë“œë ¸ì§€ë§Œ, 10% í• ì¸ ì •ì±…ìœ¼ë¡œ ë³€ê²½í•´ ì£¼ì„¸ìš”.

ê°œë°œì :

ì¼ì£¼ì¼ ë‚¨ì•˜ëŠ”ë°....

ê¸°íšì :

Agile ì„ ì–¸ ëª¨ë¥´ë‚˜ìš”? " ê³„íšì„ ë”°ë¥´ê¸°ë³´ë‹¤ëŠ” ë³€í™”ì— ëŒ€ì‘í•˜ë¼ "

https://agilemanifesto.org/iso/ko/manifesto.html

ê°œë°œì :

...

1. ê´€ì‹¬ì‚¬ ë¶„ë¦¬
    - êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ëŠ” ì±…ì„ì„ ë³„ë„ì˜ Class ë¡œ êµ¬ì„±í•˜ì‹œì˜¤.
2. ì¢‹ì€ OOP ì„¤ê³„ 5ê°€ì§€ ì›ì¹™ì— ëŒ€í•´ ê³µë¶€ README ì— ì‘ì„±ë°”ëë‹ˆë‹¤.

   
## Answer

### RateDiscountPolicy

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-11-19 21 04 40](https://github.com/FX-STUDY/BE-springBasic/assets/100909578/e216a10a-088c-44ee-8c54-e31ef7bd35b1)

> ì¸í„°í˜ì´ìŠ¤ ë„ì… ì‹œ ì¥ì ì— ëŒ€í•´ ê³µë¶€ í•„ìš”


### RateDiscountPolicy

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

public class RateDiscountPolicy implements DiscountPolicy{

    private int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {

        if (member.getGrade() == Grade.VIP){
            return price * discountPercent / 100;
        }

        return 0;

    }
}
```

### Test

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.*;

class RateDiscountPolicyTest {

    RateDiscountPolicy discountPolicy = new RateDiscountPolicy();

    @Test
    @DisplayName("VIP 10% í• ì¸")
    void vip_o(){

        //given
        Member member = new Member("memberVIP", Grade.VIP);
        //when
        int discount = discountPolicy.discount(member,10000);
        //then
        assertThat(discount).isEqualTo(1000);

    }

    @Test
    @DisplayName("VIPê°€ ì•„ë‹ˆë©´ í• ì¸ì´ ì ìš© ì•ˆë¨")
    void vip_x(){

        //given
        Member member = new Member("memberBasic",Grade.BASIC);
        //when
        int discount = discountPolicy.discount(member,10000);
        //then
        assertThat(discount).isEqualTo(0);

    }

}
```

## ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì 

í• ì¸ ì •ì±…ì„ ë³€ê²½í•˜ë ¤ë©´ í´ë¼ì´ì–¸íŠ¸ì¸ `OrderServiceImpl` ì½”ë“œë¥¼ ê³ ì³ì•¼ í•œë‹¤.

```java
public class OrderServiceImpl implements OrderService{

	private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
	
}
```

ì—­í• , êµ¬í˜„ ë¶„ë¦¬ â†’ OK

ë‹¤í˜•ì„± í™œìš©, ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ ê°ì²´ ë¶„ë¦¬ â†’ OK

OCP, DIP ìœ„ë°˜

DIP : ì¶”ìƒ [ ì¸í„°í˜ì´ìŠ¤ ] ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬ì²´ [ êµ¬í˜„ ] í´ë˜ìŠ¤ì—ë„ ì˜ì¡´í•˜ê³  ìˆë‹¤.

OCP : ê¸°ëŠ¥ì„ í™•ì¥í•´ì„œ ë³€ê²½í•˜ë©´, í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜í–¥ì„ ì¤€ë‹¤.

## í•´ê²° ë°©ë²•?

---

DIP ë¥¼ ìœ„ë°˜í•˜ì§€ ì•Šë„ë¡ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•˜ë©´ ëœë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-11-19 21 20 21](https://github.com/FX-STUDY/BE-springBasic/assets/100909578/92e9b97e-9321-4890-966e-b834b370d81e)

### ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì½”ë“œ ë³€ê²½

```java
public class OrderServiceImpl implements OrderService {
      //private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
      private DiscountPolicy discountPolicy;
}
```

ì‹¤í–‰ì„ í•˜ë©´ NPE [ null pointer exception ]  ê°€ ë°œìƒí•œë‹¤.

### í•´ê²° ë°©ì•ˆ

ì™¸ë¶€ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì¸ `OrderServiceImpl` ì— `DiscountPolicy` ì˜ êµ¬í˜„ ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…í•´ì£¼ì–´ì•¼ í•œë‹¤.

## ê´€ì‹¬ì‚¬ ë¶„ë¦¬

ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±(config)í•˜ê¸° ìœ„í•´, **êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**í•˜ê³ , 

**ì—°ê²°**í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ”ë³„ë„ì˜ ì„¤ì • í´ë˜ìŠ¤ ë§Œë“¤ê¸°

### AppConfig

```java

package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService(){
        return new MemberServiceImpl(memberRepository());
    }

    public OrderService orderService(){
        return new OrderServiceImpl(
                memberRepository(),
                discountPolicy()
        );
    }

    public MemberRepository memberRepository(){
        return new MemoryMemberRepository();
    }

    public DiscountPolicy discountPolicy(){
        return new FixDiscountPolicy();
    }

}
```

AppConfig ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.

- `MemberServiceImpl`
- `MemoryMemberRepository`
- `OrderServiceImpl`
- `FixDiscountPolicy`

AppConfig ëŠ” ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ë¥¼ ìƒì„±ìë¥¼ í†µí•´ì„œ ì£¼ì…í•´ì¤€ë‹¤.

- `MemberServiceImpl` â†’ `MemoryMemberRepository`
- `OrderServiceImpl` â†’ `MemoryMemberRepository` , `FixDiscountPolicy`

### MemberServiceImpl - ìƒì„±ì ì£¼ì…

```java
package hello.core.member;

public class MemberServiceImpl implements MemberService{

    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

ì„¤ê³„ ë³€ê²½ìœ¼ë¡œ `MemberServiceImpl` ì€ `MemoryMemberRepository` ë¥¼ ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.

ë‹¨ì§€ `MemberRepository` ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´í•œë‹¤.

`MemberServiceImpl` ì…ì¥ì—ì„œ ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ë“¤ì–´ì˜¬ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.

`MemberServiceImpl` ì˜ ìƒì„±ìë¥¼ í†µí•´ì„œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë¥¼ ì£¼ì…í• ì§€ëŠ” ì˜¤ì§ ì™¸ë¶€ ( `AppConfig` ) ì—ì„œ ê²°ì • ë¨

`MemberServiceImpl` ì€ ì´ì œë¶€í„° ì˜ì¡´ê´€ê³„ì— ëŒ€í•œ ê³ ë¯¼ì€ ì™¸ë¶€ì— ë§¡ê¸°ê³  ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘í•˜ë©´ ëœë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-11-19 21 43 24](https://github.com/FX-STUDY/BE-springBasic/assets/100909578/74a2ea7a-d6b6-4025-a590-f7cad86a7edd)

ê°ì²´ì˜ ìƒì„±ê³¼ ì—°ê²°ì€ `AppConfig` ê°€ ë‹´ë‹¹í•œë‹¤. = DIP ì™„ì„±

### íšŒì› ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-11-19 21 44 50](https://github.com/FX-STUDY/BE-springBasic/assets/100909578/fe293950-b46f-4d04-be03-4ad8f09653b0)

`appConfig` ê°ì²´ëŠ” `memoryMemberRepository` ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ê°’ì„ `memberServiceImpl` ì„ ìƒì„±í•˜ë©´ì„œ ìƒì„±ìë¡œ ì „ë‹¬ ëœë‹¤.

í´ë¼ì´ì–¸íŠ¸ì¸ `memberServiceImple` ì…ì¥ì—ì„œ ë³´ë©´ ì˜ì¡´ê´€ê³„ë¥¼ ë§ˆì¹˜ ì™¸ë¶€ì—ì„œ ì£¼ì…í•´ì£¼ëŠ” ê²ƒ ê°™ë‹¤ê³  í•´ì„œ DI [ Dependency Injection ] , ì˜ì¡´ì„± ì£¼ì…ì´ë¼ í•œë‹¤.

### OrderServiceImpl - ìƒì„±ì ì£¼ì…

```java
package hello.core.order;

import hello.core.discount.DiscountPolicy;
import hello.core.member.Member;
import hello.core.member.MemberRepository;

public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member,itemPrice);
        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

## AppConfig ì‹¤í–‰

### MemberApp

```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;

public class MemberApp {

    public static void main(String[] args) {

        AppConfig appConfig = new AppConfig();
        MemberService memberService = appConfig.memberService();

        Member member = new Member("memberA", Grade.VIP);

        memberService.join(member);

        Member findMember = memberService.findMember(1L);

        System.out.println("member = " + member.getName());
        System.out.println("findMember = " + findMember.getName());

    }

}
```

### OrderApp

```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.order.Order;
import hello.core.order.OrderService;

public class OrderApp {
    public static void main(String[] args) {

        AppConfig appConfig = new AppConfig();
        MemberService memberService = appConfig.memberService();
        OrderService orderService = appConfig.orderService();

        Member member = new Member("memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(member.getId(),"itemA",10000);

        System.out.println("order = " + order);

    }
}
```

### Test

```java
package hello.core.member;

import hello.core.AppConfig;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.*;
import static org.junit.jupiter.api.Assertions.*;

class MemberServiceTest {

    MemberService memberService;

    @BeforeEach
    public void beforeEach(){
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
    }

    @Test
    void join() {
        //given
        Member member = new Member("memberA",Grade.VIP);

        //when
        memberService.join(member);
        Member findMember = memberService.findMember(1L);

        //then
        assertThat(member).isEqualTo(findMember);

    }
}
```

```java
package hello.core.order;

import hello.core.AppConfig;
import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.mockito.internal.matchers.Or;

import static org.junit.jupiter.api.Assertions.*;

class OrderServiceTest {

    MemberService memberService;
    OrderService orderService;

    @BeforeEach
    public void beforeEach(){
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
        orderService = appConfig.orderService();
    }

    @Test
    void createOrder() {

        Member member = new Member("memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(member.getId(),"itemA",10000);
        org.assertj.core.api.Assertions.assertThat(order.getDiscountPrice()).isEqualTo(1000);

    }
}
```

`@BeforeEach` ëŠ” ê° í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— í˜¸ì¶œëœë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-11-19 21 54 43](https://github.com/FX-STUDY/BE-springBasic/assets/100909578/a8b736d4-3abd-4cbb-b874-5bee95292fbb)


## ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©

---

FixDiscountPolicy â†’ RateDiscountPolicy ë³€ê²½

**AppConfigì˜ ë“±ì¥ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í¬ê²Œ ì‚¬ìš© ì˜ì—­ê³¼, ê°ì²´ë¥¼ ìƒì„±í•˜ê³  êµ¬ì„± (Configuration)í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ ë¶„ë¦¬ë˜ì—ˆë‹¤.**

### ì‚¬ìš©, êµ¬ì„±ì˜ ë¶„ë¦¬

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-11-19 21 56 08](https://github.com/FX-STUDY/BE-springBasic/assets/100909578/8ec39aa6-074d-45fb-8392-7ad031812105)


### í• ì¸ ì •ì±…ì˜ ë³€ê²½

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-11-19 21 56 38](https://github.com/FX-STUDY/BE-springBasic/assets/100909578/de39e7d3-9ba1-4268-bc46-3bbf5fcc1b0b)


`FixDiscountPolicy` â†’ `RateDiscountPolicy` ë¡œ ë³€ê²½í•´ë„ êµ¬ì„± ì˜ì—­ë§Œ ì˜í–¥ì„ ë°›ê³ , ì‚¬ìš© ì˜ì—­ì€ ì „í˜€ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.

### í• ì¸ ì •ì±… ë³€ê²½ êµ¬ì„± ì½”ë“œ

```java
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberRepository;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService(){
        return new MemberServiceImpl(memberRepository());
    }

    public OrderService orderService(){
        return new OrderServiceImpl(
                memberRepository(),
                discountPolicy()
        );
    }

    public MemberRepository memberRepository(){
        return new MemoryMemberRepository();
    }

    public DiscountPolicy discountPolicy(){
        //return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }

}
```

ì´ì œ í• ì¸ ì •ì±…ì„ ë³€ê²½í•´ë„, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì„± ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” `AppConfig` ë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤.
í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ `OrderServiceImpl` ë¥¼ í¬í•¨í•´ì„œ **ì‚¬ìš© ì˜ì—­**ì˜ ì–´ë–¤ ì½”ë“œë„ ë³€ê²½í•  í•„ìš”ê°€ ì—†ë‹¤.

**êµ¬ì„± ì˜ì—­**ì€ ë‹¹ì—°íˆ ë³€ê²½ëœë‹¤.
